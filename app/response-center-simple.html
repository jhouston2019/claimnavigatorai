<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Response Center - ClaimNavigatorAI</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #fff; }
    header { background: #0f172a; padding: 1rem; color: #fff; }
    nav { display: flex; justify-content: space-between; align-items: center; }
    .nav-links { display: flex; gap: 1rem; }
    .nav-links a { color: #fff; text-decoration: none; }
    .main-content { padding: 2rem; }
    .tabs { display: flex; border-bottom: 2px solid #e5e7eb; margin-bottom: 1.5rem; }
    .tab { padding: 1rem; cursor: pointer; border: none; background: none; }
    .tab.active { border-bottom: 3px solid #1e40af; font-weight: bold; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .btn-primary { background: #1e40af; color: #fff; border: none; border-radius: 0.5rem; padding: 0.5rem 1rem; cursor: pointer; margin: 0.25rem; }
    .btn-secondary { background: #3b82f6; color: #fff; border: none; border-radius: 0.5rem; padding: 0.5rem 1rem; cursor: pointer; margin: 0.25rem; }
    .tool-card { background: #f9fafb; padding: 1rem; border: 1px solid #e5e7eb; border-radius: 0.5rem; margin: 0.5rem 0; }
    .tool-output { display: none; background: #fff; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 0.75rem; margin-top: 0.5rem; min-height: 80px; white-space: pre-wrap; }
    .spinner { border: 3px solid #f3f3f3; border-top: 3px solid #1e40af; border-radius: 50%; width: 18px; height: 18px; animation: spin 1s linear infinite; display: inline-block; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .accordion-item { border: 1px solid #e5e7eb; border-radius: 0.5rem; margin-bottom: 1rem; overflow: hidden; }
    .accordion-header { width: 100%; text-align: left; background: #f9fafb; padding: 0.75rem; border: none; font-weight: bold; cursor: pointer; }
    .accordion-body { display: none; padding: 1rem; background: #fff; border-top: 1px solid #e5e7eb; }
    .accordion-item.active .accordion-body { display: block; }
    textarea { width: 100%; min-height: 120px; margin-bottom: 1rem; padding: 0.5rem; border: 1px solid #e5e7eb; border-radius: 0.5rem; }
    select { padding: 0.5rem; border-radius: 0.5rem; border: 1px solid #e5e7eb; }
    input[type="text"] { width: 100%; margin-bottom: 1rem; padding: 0.5rem; border: 1px solid #e5e7eb; border-radius: 0.5rem; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 1rem; }
    th, td { border: 1px solid #e5e7eb; padding: 0.5rem; text-align: left; }
    th { background: #f3f4f6; }
  </style>
</head>
<body>
  <header>
    <nav>
      <div class="logo">ClaimNavigatorAI</div>
      <div class="nav-links">
        <a href="../index.html">Home</a>
        <a href="../product.html">Product</a>
        <a href="response-center-simple.html">Response Center</a>
        <a href="settings.html">Settings</a>
        <a href="#" onclick="logout()">Logout</a>
      </div>
    </nav>
  </header>

  <main class="main-content">
    <h1>Response Center</h1>
    <p>AI-powered tools to strengthen your claim and generate professional responses</p>

    <!-- Tabs -->
    <div class="tabs">
      <button class="tab active" onclick="switchTab('ai-agent')">AI Response & Analysis Agent</button>
      <button class="tab" onclick="switchTab('my-documents')">My Documents</button>
      <button class="tab" onclick="switchTab('analysis-tools')">Claim Analysis Tools</button>
      <button class="tab" onclick="switchTab('claim-playbook')">Claim Playbook</button>
      <button class="tab" onclick="switchTab('settings')">Settings</button>
    </div>

    <!-- AI Agent -->
    <div id="ai-agent" class="tab-content active">
      <h2>AI Response Generator</h2>
      <textarea id="input-text" placeholder="Paste insurer correspondence here..."></textarea>
      <div>
        <button class="btn-primary" onclick="generateResponse()">Generate Response</button>
        <button class="btn-primary" onclick="exportDoc('docx')">Export DOCX</button>
        <button class="btn-primary" onclick="exportDoc('pdf')">Export PDF</button>
        <button class="btn-primary" onclick="saveDraft()">Save to My Documents</button>
        <select id="language-select">
          <option value="en">English</option>
          <option value="es">Español</option>
        </select>
      </div>
      <div id="ai-output" class="tool-output"></div>
      <div id="confidence-meter" style="margin-top: 0.5rem; font-size: 0.9rem; color: #6b7280;"></div>
      <h3>Session History</h3>
      <div id="session-history"></div>
    </div>

    <!-- My Documents -->
    <div id="my-documents" class="tab-content">
      <h2>My Documents</h2>
      <div style="margin-bottom: 1rem;">
        <button id="lang-en" onclick="setLang('en')" class="btn-primary">English</button>
        <button id="lang-es" onclick="setLang('es')" class="btn-secondary">Español</button>
      </div>
      <input type="text" id="doc-search" placeholder="Search documents..." oninput="filterDocuments()">
      <input type="file" id="doc-upload" onchange="uploadDocument()" style="margin-bottom: 1rem;">
      <div id="documents-container"></div>
    </div>

    <!-- Claim Analysis Tools -->
    <div id="analysis-tools" class="tab-content">
      <h2>Claim Analysis Tools</h2>
      <p>Professional tools to analyze your claim, review coverage, and assess damages</p>
      
      <div id="tool-grid">
        <!-- Policy Review Tool -->
        <div class="tool-card">
          <div style="font-weight: bold; margin-bottom: 0.5rem;">Policy Review & Coverage Analysis</div>
          <div style="font-size: 0.9rem; color: #6b7280; margin-bottom: 0.5rem;">Upload your policy documents for AI-powered coverage analysis and gap identification</div>
          <textarea id="policy-input" placeholder="Paste your policy information here or upload documents..." style="width: 100%; min-height: 80px; margin: 0.5rem 0; padding: 0.5rem; border: 1px solid #e5e7eb; border-radius: 0.5rem;"></textarea>
          <div>
            <button class="btn-primary" onclick="analyzePolicy()">Analyze Policy</button>
            <button class="btn-secondary" onclick="downloadPolicyChecklist()">Download Checklist</button>
          </div>
          <div id="policy-analysis-output" class="tool-output"></div>
        </div>

        <!-- Damage Assessment Tool -->
        <div class="tool-card">
          <div style="font-weight: bold; margin-bottom: 0.5rem;">Damage Assessment Calculator</div>
          <div style="font-size: 0.9rem; color: #6b7280; margin-bottom: 0.5rem;">Calculate and document property damage with line-item estimates and depreciation analysis</div>
          <textarea id="damage-input" placeholder="Describe the damage, paste estimates, or upload photos..." style="width: 100%; min-height: 80px; margin: 0.5rem 0; padding: 0.5rem; border: 1px solid #e5e7eb; border-radius: 0.5rem;"></textarea>
          <div>
            <button class="btn-primary" onclick="assessDamage()">Start Assessment</button>
            <button class="btn-secondary" onclick="downloadDamageForm()">Download Form</button>
          </div>
          <div id="damage-assessment-output" class="tool-output"></div>
        </div>

        <!-- Estimate Review Tool -->
        <div class="tool-card">
          <div style="font-weight: bold; margin-bottom: 0.5rem;">Estimate Review & Comparison</div>
          <div style="font-size: 0.9rem; color: #6b7280; margin-bottom: 0.5rem;">Compare contractor estimates with insurer estimates and identify discrepancies</div>
          <textarea id="estimate-input" placeholder="Paste contractor and insurer estimates for comparison..." style="width: 100%; min-height: 80px; margin: 0.5rem 0; padding: 0.5rem; border: 1px solid #e5e7eb; border-radius: 0.5rem;"></textarea>
          <div>
            <button class="btn-primary" onclick="reviewEstimate()">Review Estimate</button>
            <button class="btn-secondary" onclick="downloadComparison()">Download Comparison</button>
          </div>
          <div id="estimate-review-output" class="tool-output"></div>
        </div>

        <!-- Business Interruption Tool -->
        <div class="tool-card">
          <div style="font-weight: bold; margin-bottom: 0.5rem;">Business Interruption Calculator</div>
          <div style="font-size: 0.9rem; color: #6b7280; margin-bottom: 0.5rem;">Calculate business interruption losses including lost revenue and extra expenses</div>
          <textarea id="bi-input" placeholder="Provide business financial information, revenue data, and expenses..." style="width: 100%; min-height: 80px; margin: 0.5rem 0; padding: 0.5rem; border: 1px solid #e5e7eb; border-radius: 0.5rem;"></textarea>
          <div>
            <button class="btn-primary" onclick="calculateBI()">Calculate BI Loss</button>
            <button class="btn-secondary" onclick="downloadBICalc()">Download Calculator</button>
          </div>
          <div id="bi-calculator-output" class="tool-output"></div>
        </div>

        <!-- Expert Opinion Tool -->
        <div class="tool-card">
          <div style="font-weight: bold; margin-bottom: 0.5rem;">Expert Opinion Request Generator</div>
          <div style="font-size: 0.9rem; color: #6b7280; margin-bottom: 0.5rem;">Generate professional requests for expert opinions on damage assessment or policy interpretation</div>
          <textarea id="expert-input" placeholder="Describe the claim situation and type of expert opinion needed..." style="width: 100%; min-height: 80px; margin: 0.5rem 0; padding: 0.5rem; border: 1px solid #e5e7eb; border-radius: 0.5rem;"></textarea>
          <div>
            <button class="btn-primary" onclick="requestExpertOpinion()">Generate Request</button>
            <button class="btn-secondary" onclick="downloadExpertForm()">Download Form</button>
          </div>
          <div id="expert-opinion-output" class="tool-output"></div>
        </div>

        <!-- Settlement Analysis Tool -->
        <div class="tool-card">
          <div style="font-weight: bold; margin-bottom: 0.5rem;">Settlement Analysis & Negotiation</div>
          <div style="font-size: 0.9rem; color: #6b7280; margin-bottom: 0.5rem;">Analyze settlement offers and generate negotiation strategies with supporting documentation</div>
          <textarea id="settlement-input" placeholder="Paste settlement offer details and your claim information..." style="width: 100%; min-height: 80px; margin: 0.5rem 0; padding: 0.5rem; border: 1px solid #e5e7eb; border-radius: 0.5rem;"></textarea>
          <div>
            <button class="btn-primary" onclick="analyzeSettlement()">Analyze Settlement</button>
            <button class="btn-secondary" onclick="downloadNegotiation()">Download Strategy</button>
          </div>
          <div id="settlement-analysis-output" class="tool-output"></div>
        </div>
      </div>
    </div>

    <!-- Claim Playbook -->
    <div id="claim-playbook" class="tab-content">
      <h2>Claim Playbook</h2>
      <p>Step-by-step roadmap for managing your insurance claim. Click each phase to expand.</p>

      <div class="accordion-item">
        <button class="accordion-header" onclick="toggleAccordion(this)">Phase 1: Initial Notice of Loss</button>
        <div class="accordion-body">
          <ul>
            <li>Notify insurer immediately after the loss</li>
            <li>Submit initial claim form</li>
            <li>Document date/time of event and initial damages</li>
            <li>Upload proof of loss (photos, receipts)</li>
            <li>Track claim number & adjuster contact</li>
          </ul>
        </div>
      </div>

      <div class="accordion-item">
        <button class="accordion-header" onclick="toggleAccordion(this)">Phase 2: Documentation & Evidence</button>
        <div class="accordion-body">
          <ul>
            <li>Collect receipts, invoices, estimates</li>
            <li>Upload contractor reports</li>
            <li>Maintain expense log for ALE (Additional Living Expenses)</li>
            <li>Cross-reference with policy limits</li>
          </ul>
        </div>
      </div>

      <div class="accordion-item">
        <button class="accordion-header" onclick="toggleAccordion(this)">Phase 3: Adjuster Inspection</button>
        <div class="accordion-body">
          <ul>
            <li>Schedule inspection with insurer's adjuster</li>
            <li>Prepare property for walkthrough</li>
            <li>Provide all requested documentation</li>
            <li>Request a copy of the adjuster's report</li>
          </ul>
        </div>
      </div>

      <div class="accordion-item">
        <button class="accordion-header" onclick="toggleAccordion(this)">Phase 4: Estimate Review</button>
        <div class="accordion-body">
          <ul>
            <li>Review insurer's estimate line-by-line</li>
            <li>Compare with contractor estimates</li>
            <li>Highlight discrepancies for negotiation</li>
            <li>Prepare supplemental documentation</li>
          </ul>
        </div>
      </div>

      <div class="accordion-item">
        <button class="accordion-header" onclick="toggleAccordion(this)">Phase 5: Negotiation</button>
        <div class="accordion-body">
          <ul>
            <li>Communicate discrepancies to adjuster</li>
            <li>Submit revised estimates</li>
            <li>Keep written record of all communications</li>
            <li>Escalate if adjuster refuses fair settlement</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Settings -->
    <div id="settings" class="tab-content">
      <h2>Account Settings</h2>
      <h3>Credit Usage Log</h3>
      <table id="credit-log-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Tool</th>
            <th>Language</th>
            <th>Tokens Used</th>
          </tr>
        </thead>
        <tbody id="credit-log-body">
          <tr><td colspan="4">Loading...</td></tr>
        </tbody>
      </table>
      <button class="btn-secondary" onclick="downloadAllOutputs()">Download All Outputs (ZIP)</button>
    </div>
  </main>

  <script>
    // Global variables
    let currentLang = 'en';

    // Tab switching
    function switchTab(tabName) {
      console.log('Switching to tab:', tabName);
      
      // Remove active class from all tabs and content
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
      
      // Add active class to selected tab and content
      event.target.classList.add('active');
      document.getElementById(tabName).classList.add('active');
      
      // Load content for specific tabs
      if (tabName === 'my-documents') {
        loadDocuments();
      } else if (tabName === 'settings') {
        loadCreditLog();
      }
    }

    // Accordion functionality
    function toggleAccordion(button) {
      console.log('Toggling accordion');
      const accordionItem = button.parentElement;
      accordionItem.classList.toggle('active');
    }

    // AI Response Generation
    function generateResponse() {
      console.log('Generating AI response');
      const input = document.getElementById('input-text').value.trim();
      
      if (!input) {
        alert("Please paste some text first.");
        return;
      }

      const output = document.getElementById('ai-output');
      const confidence = document.getElementById('confidence-meter');
      
      output.style.display = 'block';
      output.innerHTML = '<div class="spinner"></div> Generating...';
      confidence.textContent = '';

      // Simulate AI response generation
      setTimeout(() => {
        const mockResponse = `Thank you for your correspondence regarding claim #${Math.floor(Math.random() * 10000)}.

Based on the information provided, I would like to address the following points:

1. **Policy Coverage Review**: Please provide additional documentation to support the claim as outlined in your policy terms.

2. **Damage Assessment**: We request a detailed assessment from a qualified contractor to evaluate the extent of damages.

3. **Timeline**: Please submit all required documentation within 30 days to avoid any delays in processing.

This is a mock AI-generated response for development testing. In production, this would be generated by OpenAI's GPT-4 model.

Best regards,
Policyholder Response Team`;

        output.textContent = mockResponse;
        confidence.textContent = "Confidence: High (Development Mode)";
        addToHistory("ai-agent", mockResponse);
      }, 2000);
    }

    // Document functions
    function loadDocuments() {
      console.log('Loading documents');
      const container = document.getElementById("documents-container");
      const currentLang = localStorage.getItem('lang') || 'en';
      
      // Load real documents from JSON files
      try {
        const docsUrl = currentLang === 'es' ? '/assets/docs/es/documents.json' : '/assets/data/documents.json';
        const response = await fetch(docsUrl);
        const docsData = await response.json();
        
        // Convert object to array and sort by label
        const docsArray = Object.values(docsData).sort((a, b) => a.label.localeCompare(b.label));
        
        container.innerHTML = "";
        
        if (docsArray.length === 0) {
          container.innerHTML = `<p>No documents found for ${currentLang === 'es' ? 'Spanish' : 'English'}.</p>`;
          return;
        }
        
        docsArray.forEach(doc => {
          const card = document.createElement("div");
          card.className = "tool-card";
          card.innerHTML = `
            <div style="font-weight: bold; margin-bottom: 0.5rem;">${doc.label}</div>
            <div style="font-size: 0.9rem; color: #6b7280; margin-bottom: 0.5rem;">${doc.description || 'Insurance claim document'}</div>
            <div>
              <button class="btn-primary" onclick="openDocument('${doc.templatePath}')">Template</button>
              <button class="btn-secondary" onclick="openDocument('${doc.samplePath}')">Sample</button>
            </div>
          `;
          container.appendChild(card);
        });
        
        // Show document count
        const countDiv = document.createElement("div");
        countDiv.style.cssText = "margin-top: 1rem; padding: 0.5rem; background: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 0.5rem; color: #0369a1;";
        countDiv.innerHTML = `<strong>📄 ${docsArray.length} documents available in ${currentLang === 'es' ? 'Spanish' : 'English'}</strong>`;
        container.appendChild(countDiv);
        
      } catch (error) {
        console.error('Error loading documents:', error);
        container.innerHTML = `<p style="color: red;">Error loading documents: ${error.message}</p>`;
      }
    }

    function openDocument(docName) {
      console.log('Opening document:', docName);
      alert(`Development Mode: Would open document "${docName}"\n\nIn production, this would generate a signed URL and open the document.`);
    }

    function setLang(newLang) {
      console.log('Setting language:', newLang);
      currentLang = newLang;
      localStorage.setItem('lang', newLang);
      
      // Update button styling
      const enBtn = document.getElementById('lang-en');
      const esBtn = document.getElementById('lang-es');
      
      if (enBtn && esBtn) {
        if (newLang === 'en') {
          enBtn.className = 'btn-primary';
          esBtn.className = 'btn-secondary';
        } else {
          enBtn.className = 'btn-secondary';
          esBtn.className = 'btn-primary';
        }
      }
      
      loadDocuments();
    }

    function filterDocuments() {
      console.log('Filtering documents');
      const searchTerm = document.getElementById('doc-search').value.toLowerCase();
      const cards = document.querySelectorAll('.tool-card');
      
      cards.forEach(card => {
        const title = card.querySelector('div').textContent.toLowerCase();
        if (title.includes(searchTerm)) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    }

    function uploadDocument() {
      console.log('Uploading document');
      const file = document.getElementById('doc-upload').files[0];
      if (file) {
        alert(`Development Mode: Would upload file "${file.name}"\n\nIn production, this would upload and classify the document.`);
      }
    }

    // Credit log
    function loadCreditLog() {
      console.log('Loading credit log');
      const tbody = document.getElementById('credit-log-body');
      
      const mockLogs = [
        {
          date: new Date().toLocaleString(),
          tool: "ai-response",
          language: "en",
          tokens: 150
        },
        {
          date: new Date(Date.now() - 86400000).toLocaleString(),
          tool: "ai-response", 
          language: "es",
          tokens: 200
        },
        {
          date: new Date(Date.now() - 172800000).toLocaleString(),
          tool: "document-generation",
          language: "en", 
          tokens: 75
        }
      ];

      tbody.innerHTML = "";
      mockLogs.forEach(log => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${log.date}</td>
          <td>${log.tool}</td>
          <td>${log.language}</td>
          <td>${log.tokens}</td>
        `;
        tbody.appendChild(row);
      });
    }

    // Utility functions
    function addToHistory(tool, text) {
      const history = document.getElementById('session-history');
      const div = document.createElement('div');
      div.textContent = `[${tool}] ${text.substring(0, 100)}...`;
      history.appendChild(div);
    }

    function saveDraft() {
      console.log('Saving draft');
      const text = document.getElementById('ai-output').textContent;
      if (text) {
        alert("Development Mode: Draft would be saved to My Documents\n\nIn production, this would save to the database.");
      } else {
        alert("No draft to save. Generate a response first.");
      }
    }

    function exportDoc(type) {
      console.log('Exporting document:', type);
      const text = document.getElementById('ai-output').textContent;
      if (text) {
        alert(`Development Mode: Would export as ${type.toUpperCase()}\n\nIn production, this would generate and download the file.`);
      } else {
        alert("No content to export. Generate a response first.");
      }
    }

    function downloadAllOutputs() {
      console.log('Downloading all outputs');
      alert("Development Mode: Would download all outputs as ZIP\n\nIn production, this would generate and download a ZIP file.");
    }

    // --- Claim Analysis Tools ---
    function analyzePolicy() {
      console.log('Analyzing policy');
      const output = document.getElementById('policy-analysis-output');
      output.style.display = 'block';
      output.innerHTML = '<div class="spinner"></div> Analyzing policy...';

      setTimeout(() => {
        const analysis = `Policy Coverage Analysis Results:

✓ Coverage Type: Property Insurance
✓ Policy Limits: $500,000 dwelling, $100,000 contents
✓ Deductible: $2,500
✓ Coverage Gaps Identified:
  - Additional Living Expenses (ALE) coverage may be insufficient
  - Code upgrade coverage not clearly defined
  - Mold coverage limitations present

Recommendations:
1. Review ALE coverage limits for extended displacement
2. Clarify code upgrade coverage with adjuster
3. Document all mold-related damages immediately
4. Consider hiring public adjuster for complex claim

This is a mock analysis for development testing.`;
        output.textContent = analysis;
      }, 2000);
    }

    function assessDamage() {
      console.log('Assessing damage');
      const output = document.getElementById('damage-assessment-output');
      output.style.display = 'block';
      output.innerHTML = '<div class="spinner"></div> Calculating damage assessment...';

      setTimeout(() => {
        const assessment = `Damage Assessment Summary:

Property Damage Breakdown:
- Roof Damage: $15,000 (replacement required)
- Interior Water Damage: $8,500 (drywall, flooring)
- HVAC System: $3,200 (water damage)
- Personal Property: $12,000 (furniture, electronics)

Total Estimated Damage: $38,700
Less Depreciation (10%): $3,870
Net Claim Value: $34,830

Documentation Required:
✓ Photos of all damaged areas
✓ Contractor estimates (minimum 2)
✓ Proof of ownership for personal property
✓ Receipts for emergency repairs

This is a mock assessment for development testing.`;
        output.textContent = assessment;
      }, 2000);
    }

    function reviewEstimate() {
      console.log('Reviewing estimate');
      const output = document.getElementById('estimate-review-output');
      output.style.display = 'block';
      output.innerHTML = '<div class="spinner"></div> Reviewing estimates...';

      setTimeout(() => {
        const review = `Estimate Comparison Analysis:

Contractor Estimate: $38,700
Insurer Estimate: $28,500
Discrepancy: $10,200 (26% difference)

Key Discrepancies Identified:
1. Roof Replacement: Contractor $15,000 vs Insurer $12,000
   - Missing: Underlayment, flashing, permits
2. Interior Repairs: Contractor $8,500 vs Insurer $6,200
   - Missing: Paint, trim, baseboards
3. HVAC: Contractor $3,200 vs Insurer $2,100
   - Missing: Ductwork cleaning, filter replacement

Recommended Actions:
1. Request detailed line-item breakdown from insurer
2. Submit contractor estimates with supporting documentation
3. Schedule re-inspection with both parties present
4. Consider independent appraisal if dispute continues

This is a mock review for development testing.`;
        output.textContent = review;
      }, 2000);
    }

    function calculateBI() {
      console.log('Calculating business interruption');
      const output = document.getElementById('bi-calculator-output');
      output.style.display = 'block';
      output.innerHTML = '<div class="spinner"></div> Calculating business interruption...';

      setTimeout(() => {
        const biCalc = `Business Interruption Loss Calculation:

Lost Revenue Analysis:
- Pre-loss monthly revenue: $25,000
- Projected downtime: 3 months
- Total lost revenue: $75,000

Extra Expenses:
- Temporary location rent: $3,000/month × 3 = $9,000
- Equipment rental: $1,500/month × 3 = $4,500
- Additional utilities: $500/month × 3 = $1,500
- Marketing to retain customers: $2,000

Total Extra Expenses: $17,000

Total BI Claim: $92,000

Documentation Required:
✓ Profit & Loss statements (12 months prior)
✓ Tax returns (2 years)
✓ Bank statements
✓ Customer contracts
✓ Vendor invoices

This is a mock calculation for development testing.`;
        output.textContent = biCalc;
      }, 2000);
    }

    function requestExpertOpinion() {
      console.log('Requesting expert opinion');
      const output = document.getElementById('expert-opinion-output');
      output.style.display = 'block';
      output.innerHTML = '<div class="spinner"></div> Generating expert opinion request...';

      setTimeout(() => {
        const expertRequest = `Expert Opinion Request Letter:

[Date]

[Expert Name]
[Expert Company]
[Address]

Re: Property Damage Assessment - Claim #[CLAIM_NUMBER]

Dear [Expert Name],

We are requesting your professional opinion regarding property damage sustained at [Property Address] on [Date of Loss].

Scope of Work Requested:
1. Structural damage assessment
2. Cause and origin analysis
3. Repair methodology and cost estimation
4. Timeline for completion
5. Code compliance requirements

Documents Provided:
- Insurance adjuster's estimate
- Contractor estimates
- Photographic documentation
- Engineering reports (if available)

Please provide your written opinion within 14 days of inspection.

Sincerely,
[Your Name]

This is a mock request for development testing.`;
        output.textContent = expertRequest;
      }, 2000);
    }

    function analyzeSettlement() {
      console.log('Analyzing settlement');
      const output = document.getElementById('settlement-analysis-output');
      output.style.display = 'block';
      output.innerHTML = '<div class="spinner"></div> Analyzing settlement offer...';

      setTimeout(() => {
        const settlementAnalysis = `Settlement Analysis & Negotiation Strategy:

Current Settlement Offer: $28,500
Your Claim Value: $38,700
Shortfall: $10,200 (26% underpayment)

Negotiation Strategy:
1. Document all discrepancies with supporting evidence
2. Request detailed explanation for each line item reduction
3. Submit independent contractor estimates
4. Highlight code upgrade requirements
5. Emphasize policy language supporting full replacement cost

Key Arguments:
- Policy provides replacement cost coverage
- Contractor estimates are from licensed professionals
- Code upgrades are required by local ordinances
- Depreciation should not apply to structural elements

Next Steps:
1. Send formal demand letter within 30 days
2. Request appraisal if negotiations fail
3. Consider public adjuster if claim exceeds $50,000
4. Document all communications

This is a mock analysis for development testing.`;
        output.textContent = settlementAnalysis;
      }, 2000);
    }

    // Download functions for analysis tools
    function downloadPolicyChecklist() {
      console.log('Downloading policy checklist');
      alert("Development Mode: Would download Policy Review Checklist\n\nIn production, this would generate and download a comprehensive policy review checklist.");
    }

    function downloadDamageForm() {
      console.log('Downloading damage form');
      alert("Development Mode: Would download Damage Assessment Form\n\nIn production, this would generate and download a detailed damage assessment form.");
    }

    function downloadComparison() {
      console.log('Downloading comparison');
      alert("Development Mode: Would download Estimate Comparison Report\n\nIn production, this would generate and download a detailed comparison report.");
    }

    function downloadBICalc() {
      console.log('Downloading BI calculator');
      alert("Development Mode: Would download Business Interruption Calculator\n\nIn production, this would generate and download a BI calculation worksheet.");
    }

    function downloadExpertForm() {
      console.log('Downloading expert form');
      alert("Development Mode: Would download Expert Opinion Request Form\n\nIn production, this would generate and download a professional expert opinion request form.");
    }

    function downloadNegotiation() {
      console.log('Downloading negotiation strategy');
      alert("Development Mode: Would download Negotiation Strategy Document\n\nIn production, this would generate and download a comprehensive negotiation strategy document.");
    }

    function logout() {
      console.log('Logging out');
      alert("Development Mode: Would log out\n\nIn production, this would clear the session and redirect to login.");
    }

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Response Center Simple loaded successfully');
      loadDocuments();
      loadCreditLog();
    });
  </script>
</body>
</html>
