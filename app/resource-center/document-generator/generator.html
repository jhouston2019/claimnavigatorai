<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Generator - ClaimNavigatorAI</title>
    <meta name="description" content="Generate professional insurance claim documents with AI assistance">
    <link rel="stylesheet" href="/app/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/document-generator.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html-docx-js/0.4.1/html-docx.js"></script>
</head>
<body class="main-grid">
    <!-- Navigation Header -->
    <header class="header">
        <div class="bar container">
            <div class="brand">
                <div class="logo"></div>
                <div>ClaimNavigatorAI</div>
            </div>
            <nav class="nav">
                <a href="/app/index.html">Home</a>
                <a href="/app/response-center.html">‚Üê Resource Center</a>
                <a href="/app/resource-center/document-generator/index.html">‚Üê Document Generator</a>
            </nav>
        </div>
    </header>

    <main class="document-generator">
        <div class="text-center mb-4">
            <h1 id="documentTitle">Document Generator</h1>
            <p id="documentDescription">Generate professional claim documents with AI assistance</p>
        </div>

        <!-- Document Description -->
        <div class="document-description">
            <h2 id="documentTypeTitle">About This Document</h2>
            <p id="documentTypeDescription">This document will be generated with your claim information automatically included.</p>
            
            <div class="document-features">
                <h3>What this document includes:</h3>
                <ul>
                    <li>Professional letterhead and formatting</li>
                    <li>Your claim information automatically included</li>
                    <li>AI-generated content based on your situation</li>
                    <li>Professional closing and signature block</li>
                    <li>Ready-to-submit format</li>
                </ul>
            </div>
        </div>

        <!-- Topic Input Section -->
        <div class="topic-input-section">
            <h2>Describe Your Specific Situation</h2>
            <p>Provide details about your claim situation to generate a personalized document.</p>
            
            <div class="form-group">
                <label for="claimTopic">What's your specific claim situation or what do you need help with?</label>
                <textarea 
                    id="claimTopic" 
                    name="claimTopic" 
                    class="topic-textarea" 
                    rows="6" 
                    placeholder="Example: My insurer denied my roof damage claim saying it was pre-existing damage. I need to appeal this decision and get proper compensation for the storm damage."
                    required
                ></textarea>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button type="button" class="btn-primary" id="generateDocumentBtn">
                Generate Document
            </button>
        </div>

        <!-- Loading State -->
        <div class="loading" id="loadingState">
            <div class="spinner"></div>
            <p>AI is analyzing your situation and generating your professional document...</p>
        </div>

        <!-- Results -->
        <div class="result-container" id="resultContainer">
            <div class="result-header">
                <h3 id="documentTypeLabel">Generated Document</h3>
                <p id="documentDescription">Your AI-generated document is ready with your claim information automatically included</p>
            </div>
            
            <div class="result-content" id="resultContent"></div>
            
            <div class="result-actions">
                <button class="action-btn primary" id="exportPdfBtn">
                    üìÑ Download PDF
                </button>
                <button class="action-btn secondary" id="exportDocxBtn">
                    üìù Download DOCX
                </button>
                <button class="action-btn secondary" id="copyTextBtn">
                    üìã Copy Text
                </button>
                <button class="action-btn secondary" id="regenerateBtn">
                    üîÑ Regenerate
                </button>
            </div>
        </div>

        <!-- Error Message -->
        <div class="error-message" id="errorMessage" style="display: none;">
            <h4>‚ö†Ô∏è Generation Error</h4>
            <p id="errorText"></p>
            <button class="action-btn secondary" onclick="document.getElementById('errorMessage').style.display='none'">
                Dismiss
            </button>
        </div>
    </main>

    <script src="/app/assets/js/global-claim-manager.js"></script>
    <script src="/app/resource-center/document-generator/generator.js"></script>
    <script>
        // Dynamic content loading based on URL parameter
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const documentType = urlParams.get('type');
            
            if (documentType) {
                updatePageContent(documentType);
            }
        });

        function updatePageContent(documentType) {
            const documentInfo = getDocumentInfo(documentType);
            
            // Update page title
            document.getElementById('documentTitle').textContent = documentInfo.title;
            document.getElementById('documentDescription').textContent = documentInfo.description;
            document.getElementById('documentTypeTitle').textContent = `About ${documentInfo.title}`;
            document.getElementById('documentTypeDescription').textContent = documentInfo.longDescription;
            
            // Update document features
            const featuresList = document.querySelector('.document-features ul');
            if (featuresList) {
                featuresList.innerHTML = documentInfo.features.map(feature => `<li>${feature}</li>`).join('');
            }
        }

        function getDocumentInfo(documentType) {
            const documentTypes = {
                'appeal-letter': {
                    title: 'Appeal Letter Generator',
                    description: 'Generate a professional appeal letter to challenge denied or underpaid insurance claims.',
                    longDescription: 'An appeal letter is a formal document used to challenge an insurance company\'s decision to deny or underpay a claim.',
                    features: [
                        'Professional letterhead and formatting',
                        'Clear statement of the appeal request',
                        'Detailed explanation of why the decision was wrong',
                        'Supporting evidence and documentation references',
                        'Specific request for claim review',
                        'Professional closing and signature block'
                    ]
                },
                'sworn-statement-proof-of-loss': {
                    title: 'Sworn Statement in Proof of Loss Generator',
                    description: 'Generate a comprehensive sworn statement documenting your damages and losses.',
                    longDescription: 'A sworn statement in proof of loss is a formal document that provides detailed information about your claim and damages.',
                    features: [
                        'Detailed damage documentation',
                        'Itemized loss inventory',
                        'Supporting evidence references',
                        'Professional sworn statement format',
                        'Legal compliance language',
                        'Notarization-ready format'
                    ]
                },
                'final-demand-payment': {
                    title: 'Final Demand for Payment Generator',
                    description: 'Generate a professional final demand letter for payment of your claim.',
                    longDescription: 'A final demand letter is a formal request for payment that can be used as evidence in legal proceedings.',
                    features: [
                        'Professional demand language',
                        'Clear payment request',
                        'Timeline and deadline specification',
                        'Legal consequences outlined',
                        'Professional closing',
                        'Evidence-ready format'
                    ]
                },
                'fire-damage-claim': {
                    title: 'Fire Damage Claim Generator',
                    description: 'Generate comprehensive fire damage claim documentation.',
                    longDescription: 'Fire damage claims require detailed documentation of the damage, cause, and impact on your property.',
                    features: [
                        'Fire damage assessment documentation',
                        'Cause and origin analysis',
                        'Damage inventory and valuation',
                        'Smoke and soot damage documentation',
                        'Professional fire claim language',
                        'Insurance adjuster communication format'
                    ]
                },
                'water-damage-claim': {
                    title: 'Water Damage Claim Generator',
                    description: 'Generate professional water damage claim documentation.',
                    longDescription: 'Water damage claims require specific documentation of the source, extent, and impact of water damage.',
                    features: [
                        'Water damage source identification',
                        'Extent of damage documentation',
                        'Mold and mildew assessment',
                        'Structural damage evaluation',
                        'Professional water damage terminology',
                        'Insurance compliance format'
                    ]
                }
            };
            
            return documentTypes[documentType] || {
                title: 'Document Generator',
                description: 'Generate a professional document for your claim situation.',
                longDescription: 'This document will be customized based on your specific situation and needs.',
                features: [
                    'Professional formatting',
                    'Your claim information included',
                    'AI-generated content',
                    'Ready-to-submit format'
                ]
            };
        }
    </script>
</body>
</html>
