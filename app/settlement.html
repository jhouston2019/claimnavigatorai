<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settlement Counter - ClaimNavigatorAI</title>
  <style>
    :root {
      --primary: #1e40af;
      --accent: #3b82f6;
      --background: #f9fafb;
      --border: #e5e7eb;
      --text-dark: #0f172a;
    }

    body { font-family: 'Inter', sans-serif; background-color: var(--background); }
    :root{--navy:#0f172a;--primary:#1e40af;--primary-600:#1e3a8a;--accent:#3b82f6;--text:#111827;--muted:#6b7280;--border:#e5e7eb;--panel:#f8fafc;--success:#10b981;--warn:#f59e0b;--error:#ef4444;}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:#fff;line-height:1.6}
    .header{position:sticky;top:0;z-index:1000;background:var(--navy);color:#fff;box-shadow:0 2px 6px rgba(0,0,0,.08)}
    .header .container{max-width:1200px;margin:0 auto;padding:14px 24px;display:flex;align-items:center;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800}
    .nav a{color:#c9d4ff;text-decoration:none;padding:.5rem .75rem;border-radius:.5rem}
    .nav a:hover{background:rgba(255,255,255,.1)}
  </style>
</head>

<body class="min-h-screen">
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="brand">ClaimNavigatorAI</div>
      <nav class="nav">
        <a href="/app/index.html">Home</a>
        <span style="color: #64748b; margin: 0 0.25rem;">></span>
        <span style="color: white; font-weight: 600;">Settlement Counter</span>
        <span style="color: #64748b; margin: 0 0.25rem;">></span>
        <a href="/app/resource-center.html">Resource Center</a>
      </nav>
    </div>
  </header>

  <!-- Breadcrumb Navigation -->
  <nav class="text-sm text-gray-600 mt-6 mb-4 px-4">
    <a href="/app/resource-center/index.html" class="hover:underline text-blue-600">Resource Center</a> ›
    <a href="/app/quick-start.html" class="hover:underline text-blue-600">Quick Start</a> ›
    <span class="text-gray-700 font-medium">Settlement Counter</span>
  </nav>

  <!-- Return Link -->
  <div class="text-right px-4 mb-6">
    <a href="/app/quick-start.html" class="text-sm text-blue-600 hover:underline">← Back to Quick Start Guide</a>
  </div>

  <!-- Context Banner -->
  <section class="rounded-xl p-4 mb-6 text-center border max-w-6xl mx-auto" 
           style="background: #fefce8; border-color: #fef08a; color: #78350f;">
    <p class="text-sm">
      This tool is part of the <strong>"I got a lowball offer"</strong> Quick Start path.
    </p>
  </section>

  <!-- Main Content -->
  <main class="max-w-6xl mx-auto bg-white border border-gray-200 rounded-2xl p-8 shadow-sm mb-12">
    <div class="card">
      <h2>Settlement Counter Tool</h2>
      <p>Counter lowball offers with evidence-based arguments and professional negotiation strategies.</p>
    </div>
    
    <div class="card">
      <h3>Offer Details</h3>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px">
        <input type="text" id="insurerOffer" placeholder="Insurer's Offer Amount" />
        <input type="text" id="yourEstimate" placeholder="Your Estimate Amount" />
        <input type="text" id="contractorEstimate" placeholder="Contractor Estimate" />
        <input type="text" id="policyLimit" placeholder="Policy Limit" />
        <input type="text" id="deductible" placeholder="Deductible" />
        <input type="text" id="coverageType" placeholder="RCV/ACV Coverage" />
      </div>
    </div>
    
    <div class="card">
      <h3>Counter Arguments</h3>
      <textarea id="supportingEvidence" placeholder="Describe your supporting evidence, estimates, and documentation…" style="width:100%;min-height:150px;margin-bottom:12px"></textarea>
      <div style="display:flex;gap:8px">
        <button class="btn btn-primary" id="generate">Generate Counter Offer</button>
        <button class="btn" id="export">Export Letter</button>
      </div>
      <div id="output" class="card" style="margin-top:12px"></div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-[#0f172a] text-white p-6 mt-16">
    <div class="max-w-6xl mx-auto text-center">
      <p class="text-sm text-gray-300">
        © 2025 ClaimNavigatorAI. All rights reserved. |
        <a href="/privacy.html" class="underline hover:text-blue-300">Privacy Policy</a> |
        <a href="/terms.html" class="underline hover:text-blue-300">Terms of Service</a>
      </p>
    </div>
  </footer>

  <script type="module">
    import {qs,on} from '/app/assets/js/ui-helpers.js';
    import { callAI, createDoc } from '/app/assets/js/api-client.js';
    
    on(qs('#generate'),'click', async ()=>{
      const supportingEvidence = qs('#supportingEvidence').value.trim();
      if(!supportingEvidence) return alert('Please describe your supporting evidence.');
      
      // Collect offer information
      const offerInfo = {
        insurerOffer: qs('#insurerOffer').value.trim(),
        yourEstimate: qs('#yourEstimate').value.trim(),
        contractorEstimate: qs('#contractorEstimate').value.trim(),
        policyLimit: qs('#policyLimit').value.trim(),
        deductible: qs('#deductible').value.trim(),
        coverageType: qs('#coverageType').value.trim()
      };
      
      qs('#output').innerHTML='Generating counter offer…';
      try{ 
        const r=await callAI({inputText:supportingEvidence,type:'settlement-counter',offerInfo:offerInfo}); 
        const response = r.response||r.analysis||JSON.stringify(r)||'(no content)';
        qs('#output').innerHTML = response;
      }
      catch(e){ qs('#output').innerHTML='<div style="color:#ef4444">'+e.message+'</div>'; }
    });
    
    on(qs('#export'),'click', async ()=>{
      const html=qs('#output').innerHTML.trim(); if(!html) return alert('Generate counter offer first.');
      const r=await createDoc({content:html,format:'pdf',type:'settlement-counter',filename:'settlement_counter_'+Date.now()}); location.href=r.url||r.downloadUrl;
    });
  </script>
</body>
</html>
