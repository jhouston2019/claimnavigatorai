<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>üì∏ Evidence Organizer</title><link rel="stylesheet" href="/app/assets/css/style.css"/></head><body>
<header class="header"><div class="bar container"><div class="brand"><div class="logo"></div><div>Evidence Organizer</div></div>
<nav class="nav"><a href="/app/response-center.html">‚Üê Resource Center</a></nav></div></header>
<main class="container" id="main">
  <div class="card">
    <h3>Claim Information</h3>
    <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(200px,1fr));margin-bottom:15px;">
      <label>Your Name <input id="claimantName"/></label>
      <label>Policy # <input id="policyNumber"/></label>
      <label>Claim # <input id="claimNumber"/></label>
      <label>Date of Loss <input id="dateOfLoss" type="date"/></label>
      <label>Insurance Company <input id="insurerName"/></label>
      <label>Phone Number <input id="phoneNumber" type="tel"/></label>
      <label>Email Address <input id="email" type="email"/></label>
      <label>Your Address <input id="claimantAddress"/></label>
    </div>
    <h3>Evidence Files</h3>
    <input type="file" id="files" multiple accept="image/*,.pdf,.jpg,.png,.heic,.jpeg"/>
    <button class="btn" id="categorize">Categorize with AI</button>
  </div>
  <div id="out" class="grid" style="grid-template-columns:repeat(auto-fit,minmax(260px,1fr));margin-top:12px"></div>
</main>
<script type="module">
  import {qs,on} from '/app/assets/js/ui-helpers.js';
  import { callAI } from '/app/assets/js/api-client.js';
  on(qs('#categorize'),'click', async ()=>{
    const files = [...qs('#files').files].map(f=>f.name);
    if(!files.length) return alert('Choose files first.');
    
    // Collect claim information
    const claimInfo = {
      claimantName: qs('#claimantName')?.value || 'Not provided',
      policyNumber: qs('#policyNumber')?.value || 'Not provided',
      claimNumber: qs('#claimNumber')?.value || 'Not provided',
      dateOfLoss: qs('#dateOfLoss')?.value || 'Not provided',
      insurerName: qs('#insurerName')?.value || 'Not provided',
      phoneNumber: qs('#phoneNumber')?.value || 'Not provided',
      email: qs('#email')?.value || 'Not provided',
      claimantAddress: qs('#claimantAddress')?.value || 'Not provided'
    };
    
    // Generate claim header
    const claimHeader = `CLAIM INFORMATION
================
Policyholder: ${claimInfo.claimantName}
Address: ${claimInfo.claimantAddress}
Phone: ${claimInfo.phoneNumber}
Email: ${claimInfo.email}

Policy Number: ${claimInfo.policyNumber}
Claim Number: ${claimInfo.claimNumber}
Date of Loss: ${claimInfo.dateOfLoss}
Insurance Company: ${claimInfo.insurerName}

Generated: ${new Date().toLocaleDateString()}
Document Type: EVIDENCE ORGANIZER

========================================

`;
    
    const r = await callAI({inputText:`Categorize these evidence filenames into: photos, receipts, estimates, communications. Return HTML list grouped by category.\n\n${files.join('\n')}`, type:'evidence-organizer'});
    qs('#out').innerHTML = claimHeader + (r.response||'(no categories)');
  });
</script>
<script type="module" src="/app/assets/js/diagnostics.js"></script></body></html>