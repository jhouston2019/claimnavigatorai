<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Generator - ClaimNavigatorAI</title>
    <meta name="description" content="Generate professional insurance claim documents with AI assistance">
    <link rel="stylesheet" href="/app/assets/css/style.css">
    <style>
        .document-generator {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .document-type-selector {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .document-type-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .document-type-card {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }
        
        .document-type-card:hover {
            border-color: #3b82f6;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
        }
        
        .document-type-card.selected {
            border-color: #3b82f6;
            background: #eff6ff;
        }
        
        .document-type-card h3 {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #1f2937;
        }
        
        .document-type-card p {
            color: #6b7280;
            font-size: 0.875rem;
            line-height: 1.5;
        }
        
        .form-container {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: #374151;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: border-color 0.2s;
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .generate-btn {
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 0.5rem;
            padding: 1rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
            width: 100%;
        }
        
        .generate-btn:hover {
            background: #2563eb;
        }
        
        .generate-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        
        .result-container {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            padding: 2rem;
            margin-top: 2rem;
            display: none;
        }
        
        .result-container.show {
            display: block;
        }
        
        .result-content {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            line-height: 1.5;
        }
        
        .download-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .download-btn {
            background: #10b981;
            color: white;
            border: none;
            border-radius: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .download-btn:hover {
            background: #059669;
        }
        
        .download-btn.secondary {
            background: #6b7280;
        }
        
        .download-btn.secondary:hover {
            background: #4b5563;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }
        
        .loading.show {
            display: block;
        }
        
        .spinner {
            display: inline-block;
            width: 2rem;
            height: 2rem;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error-message {
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 1rem;
            border-radius: 0.5rem;
            margin: 1rem 0;
        }
        
        @media (max-width: 768px) {
            .document-generator {
                padding: 1rem;
            }
            
            .document-type-grid {
                grid-template-columns: 1fr;
            }
            
            .download-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Header -->
    <header class="header">
        <div class="bar container">
            <div class="brand">
                <div class="logo"></div>
                <div>Document Generator</div>
            </div>
            <nav class="nav">
                <a href="/app/response-center.html">‚Üê Resource Center</a>
            </nav>
        </div>
    </header>

    <main class="document-generator">
        <div class="text-center mb-4">
            <h1>üìÑ Document Generator</h1>
            <p>Generate professional insurance claim documents with AI assistance</p>
        </div>

        <!-- Document Type Selection -->
        <div class="document-type-selector">
            <h2>Select Document Type</h2>
            <p>Choose the type of document you need to generate for your claim.</p>
            
            <div class="document-type-grid">
                <div class="document-type-card" data-type="appeal-letter">
                    <h3>üìù Appeal Letter</h3>
                    <p>Professional appeal letter for denied or underpaid claims</p>
                </div>
                
                <div class="document-type-card" data-type="demand-letter">
                    <h3>‚öñÔ∏è Demand Letter</h3>
                    <p>Strong demand letter to insurance company for fair settlement</p>
                </div>
                
                <div class="document-type-card" data-type="notice-of-delay">
                    <h3>‚è∞ Notice of Delay Complaint</h3>
                    <p>Formal complaint about delayed claim processing</p>
                </div>
                
                <div class="document-type-card" data-type="coverage-clarification">
                    <h3>‚ùì Coverage Clarification Request</h3>
                    <p>Request clarification on coverage decisions and exclusions</p>
                </div>
                
                <div class="document-type-card" data-type="proof-of-repairs">
                    <h3>üîß Proof of Repairs Submission</h3>
                    <p>Documentation of completed repairs for depreciation release</p>
                </div>
                
                <div class="document-type-card" data-type="ordinance-law">
                    <h3>üèõÔ∏è Ordinance & Law Coverage Request</h3>
                    <p>Request coverage for mandatory code upgrades</p>
                </div>
            </div>
        </div>

        <!-- Document Form -->
        <div class="form-container" id="formContainer" style="display: none;">
            <h2 id="formTitle">Document Information</h2>
            <p id="formDescription">Please provide the details for your document.</p>
            
            <form id="documentForm">
                <div class="form-group">
                    <label for="claimantName">Your Name</label>
                    <input type="text" id="claimantName" name="claimantName" required>
                </div>
                
                <div class="form-group">
                    <label for="claimantAddress">Your Address</label>
                    <textarea id="claimantAddress" name="claimantAddress" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="insurerName">Insurance Company</label>
                    <input type="text" id="insurerName" name="insurerName" required>
                </div>
                
                <div class="form-group">
                    <label for="policyNumber">Policy Number</label>
                    <input type="text" id="policyNumber" name="policyNumber" required>
                </div>
                
                <div class="form-group">
                    <label for="claimNumber">Claim Number</label>
                    <input type="text" id="claimNumber" name="claimNumber" required>
                </div>
                
                <div class="form-group">
                    <label for="dateOfLoss">Date of Loss</label>
                    <input type="date" id="dateOfLoss" name="dateOfLoss" required>
                </div>
                
                <div class="form-group">
                    <label for="situationDetails">Situation Details</label>
                    <textarea id="situationDetails" name="situationDetails" placeholder="Describe your specific situation and what you need help with..." required></textarea>
                </div>
                
                <button type="submit" class="generate-btn" id="generateBtn">
                    Generate Document
                </button>
            </form>
        </div>

        <!-- Loading State -->
        <div class="loading" id="loadingState">
            <div class="spinner"></div>
            <p>Generating your document...</p>
        </div>

        <!-- Results -->
        <div class="result-container" id="resultContainer">
            <h3>Generated Document</h3>
            <div class="result-content" id="resultContent"></div>
            <div class="download-buttons">
                <button class="download-btn" id="downloadPdfBtn">
                    üìÑ Download PDF
                </button>
                <button class="download-btn secondary" id="copyTextBtn">
                    üìã Copy Text
                </button>
            </div>
        </div>
    </main>

    <script>
        class DocumentGenerator {
            constructor() {
                this.selectedType = null;
                this.generatedContent = null;
                this.init();
            }

            init() {
                this.setupDocumentTypeSelection();
                this.setupFormSubmission();
                this.setupDownloadButtons();
                this.handleUrlParameters();
            }

            handleUrlParameters() {
                const urlParams = new URLSearchParams(window.location.search);
                const type = urlParams.get('type');
                
                if (type) {
                    // Map document types from advisory page
                    const typeMapping = {
                        'Appeal Letter': 'appeal-letter',
                        'Demand Letter': 'demand-letter',
                        'Notice of Delay Complaint': 'notice-of-delay',
                        'Coverage Clarification Request': 'coverage-clarification',
                        'Proof of Repairs Submission': 'proof-of-repairs',
                        'Ordinance & Law Coverage Request': 'ordinance-law'
                    };
                    
                    const mappedType = typeMapping[type] || type.toLowerCase().replace(/\s+/g, '-');
                    const card = document.querySelector(`[data-type="${mappedType}"]`);
                    
                    if (card) {
                        this.selectDocumentType(card);
                    }
                }
            }

            setupDocumentTypeSelection() {
                const cards = document.querySelectorAll('.document-type-card');
                
                cards.forEach(card => {
                    card.addEventListener('click', () => {
                        this.selectDocumentType(card);
                    });
                });
            }

            selectDocumentType(card) {
                // Remove previous selection
                document.querySelectorAll('.document-type-card').forEach(c => c.classList.remove('selected'));
                
                // Select new card
                card.classList.add('selected');
                this.selectedType = card.dataset.type;
                
                // Show form
                this.showForm();
            }

            showForm() {
                const formContainer = document.getElementById('formContainer');
                const formTitle = document.getElementById('formTitle');
                const formDescription = document.getElementById('formDescription');
                
                const typeInfo = {
                    'appeal-letter': {
                        title: 'Appeal Letter',
                        description: 'Generate a professional appeal letter for your denied or underpaid claim.'
                    },
                    'demand-letter': {
                        title: 'Demand Letter',
                        description: 'Create a strong demand letter requesting fair settlement from your insurer.'
                    },
                    'notice-of-delay': {
                        title: 'Notice of Delay Complaint',
                        description: 'Generate a formal complaint about delayed claim processing.'
                    },
                    'coverage-clarification': {
                        title: 'Coverage Clarification Request',
                        description: 'Request clarification on coverage decisions and exclusions.'
                    },
                    'proof-of-repairs': {
                        title: 'Proof of Repairs Submission',
                        description: 'Document completed repairs for depreciation release.'
                    },
                    'ordinance-law': {
                        title: 'Ordinance & Law Coverage Request',
                        description: 'Request coverage for mandatory code upgrades.'
                    }
                };
                
                const info = typeInfo[this.selectedType];
                formTitle.textContent = info.title;
                formDescription.textContent = info.description;
                formContainer.style.display = 'block';
                
                // Scroll to form
                formContainer.scrollIntoView({ behavior: 'smooth' });
            }

            setupFormSubmission() {
                const form = document.getElementById('documentForm');
                const generateBtn = document.getElementById('generateBtn');
                
                form.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    generateBtn.disabled = true;
                    generateBtn.textContent = 'Generating...';
                    
                    const formData = new FormData(form);
                    const data = Object.fromEntries(formData);
                    
                    try {
                        await this.generateDocument(data);
                    } catch (error) {
                        console.error('Error generating document:', error);
                        this.showError('Failed to generate document. Please try again.');
                    } finally {
                        generateBtn.disabled = false;
                        generateBtn.textContent = 'Generate Document';
                    }
                });
            }

            async generateDocument(data) {
                const loadingState = document.getElementById('loadingState');
                const resultContainer = document.getElementById('resultContainer');
                
                // Show loading
                loadingState.classList.add('show');
                resultContainer.classList.remove('show');
                
                try {
                    // Simulate AI generation (replace with actual API call)
                    const response = await this.callAIGeneration(data);
                    
                    // Hide loading
                    loadingState.classList.remove('show');
                    
                    // Show results
                    this.generatedContent = response.content;
                    this.displayResults(response.content);
                    
                } catch (error) {
                    loadingState.classList.remove('show');
                    throw error;
                }
            }

            async callAIGeneration(data) {
                // This would be replaced with actual API call to your backend
                // For now, we'll simulate the response
                
                const documentTemplates = {
                    'appeal-letter': this.generateAppealLetter(data),
                    'demand-letter': this.generateDemandLetter(data),
                    'notice-of-delay': this.generateNoticeOfDelay(data),
                    'coverage-clarification': this.generateCoverageClarification(data),
                    'proof-of-repairs': this.generateProofOfRepairs(data),
                    'ordinance-law': this.generateOrdinanceLaw(data)
                };
                
                const content = documentTemplates[this.selectedType] || 'Document content not available.';
                
                return {
                    content: content,
                    success: true
                };
            }

            generateAppealLetter(data) {
                return `[Your Name]
${data.claimantAddress}

[Date]

[Insurance Company Name]
${data.insurerName}
[Insurance Company Address]

Re: Policy Number: ${data.policyNumber}
Claim Number: ${data.claimNumber}
Date of Loss: ${data.dateOfLoss}

Dear Claims Department,

I am writing to formally appeal the decision regarding my insurance claim filed on ${data.dateOfLoss}. I believe the decision to deny/underpay my claim was made in error and request a thorough review of the following:

CLAIM DETAILS:
- Policy Number: ${data.policyNumber}
- Claim Number: ${data.claimNumber}
- Date of Loss: ${data.dateOfLoss}
- Type of Loss: [Describe your loss]

SITUATION:
${data.situationDetails}

I respectfully request that you:
1. Review all submitted documentation
2. Reconsider the coverage determination
3. Provide a detailed explanation for any denial
4. Schedule a reinspection if necessary

I look forward to your prompt response and resolution of this matter.

Sincerely,
${data.claimantName}`;
            }

            generateDemandLetter(data) {
                return `[Your Name]
${data.claimantAddress}

[Date]

[Insurance Company Name]
${data.insurerName}
[Insurance Company Address]

Re: Policy Number: ${data.policyNumber}
Claim Number: ${data.claimNumber}
Date of Loss: ${data.dateOfLoss}

Dear Claims Department,

I am writing to formally demand payment for my insurance claim filed on ${data.dateOfLoss}. Despite providing all requested documentation, I have not received a fair settlement offer.

CLAIM DETAILS:
- Policy Number: ${data.policyNumber}
- Claim Number: ${data.claimNumber}
- Date of Loss: ${data.dateOfLoss}

SITUATION:
${data.situationDetails}

I demand that you:
1. Provide a fair and complete settlement
2. Respond within 30 days
3. Provide detailed explanation for any deductions
4. Release all applicable depreciation

Failure to respond appropriately may result in legal action.

Sincerely,
${data.claimantName}`;
            }

            generateNoticeOfDelay(data) {
                return `[Your Name]
${data.claimantAddress}

[Date]

[Insurance Company Name]
${data.insurerName}
[Insurance Company Address]

Re: Policy Number: ${data.policyNumber}
Claim Number: ${data.claimNumber}
Date of Loss: ${data.dateOfLoss}

Dear Claims Department,

I am writing to formally complain about the excessive delay in processing my insurance claim. This delay constitutes a violation of [State] insurance regulations.

CLAIM DETAILS:
- Policy Number: ${data.policyNumber}
- Claim Number: ${data.claimNumber}
- Date of Loss: ${data.dateOfLoss}
- Days Since Filing: [Calculate]

SITUATION:
${data.situationDetails}

According to [State] insurance regulations, you are required to:
1. Acknowledge claims within 14 days
2. Provide coverage decisions within 30 days
3. Respond to communications promptly

I demand immediate action on my claim and request a detailed timeline for resolution.

Sincerely,
${data.claimantName}`;
            }

            generateCoverageClarification(data) {
                return `[Your Name]
${data.claimantAddress}

[Date]

[Insurance Company Name]
${data.insurerName}
[Insurance Company Address]

Re: Policy Number: ${data.policyNumber}
Claim Number: ${data.claimNumber}
Date of Loss: ${data.dateOfLoss}

Dear Claims Department,

I am writing to request clarification regarding coverage decisions made on my insurance claim. I need detailed explanations for all coverage determinations.

CLAIM DETAILS:
- Policy Number: ${data.policyNumber}
- Claim Number: ${data.claimNumber}
- Date of Loss: ${data.dateOfLoss}

SITUATION:
${data.situationDetails}

I request written clarification on:
1. Specific policy provisions cited
2. Coverage exclusions applied
3. Deductible calculations
4. Depreciation schedules used
5. Any other coverage decisions

Please provide this information within 10 business days.

Sincerely,
${data.claimantName}`;
            }

            generateProofOfRepairs(data) {
                return `[Your Name]
${data.claimantAddress}

[Date]

[Insurance Company Name]
${data.insurerName}
[Insurance Company Address]

Re: Policy Number: ${data.policyNumber}
Claim Number: ${data.claimNumber}
Date of Loss: ${data.dateOfLoss}

Dear Claims Department,

I am submitting proof of completed repairs to request release of depreciation holdback as provided for in my policy.

CLAIM DETAILS:
- Policy Number: ${data.policyNumber}
- Claim Number: ${data.claimNumber}
- Date of Loss: ${data.dateOfLoss}

SITUATION:
${data.situationDetails}

REPAIRS COMPLETED:
[Attach invoices, receipts, and photos]

I request immediate release of the depreciation holdback as repairs have been completed according to policy requirements.

Sincerely,
${data.claimantName}`;
            }

            generateOrdinanceLaw(data) {
                return `[Your Name]
${data.claimantAddress}

[Date]

[Insurance Company Name]
${data.insurerName}
[Insurance Company Address]

Re: Policy Number: ${data.policyNumber}
Claim Number: ${data.claimNumber}
Date of Loss: ${data.dateOfLoss}

Dear Claims Department,

I am requesting coverage for mandatory code upgrades required by local building codes as provided for under the Ordinance and Law coverage in my policy.

CLAIM DETAILS:
- Policy Number: ${data.policyNumber}
- Claim Number: ${data.claimNumber}
- Date of Loss: ${data.dateOfLoss}

SITUATION:
${data.situationDetails}

CODE REQUIREMENTS:
[Attach building department requirements]

I request coverage for all mandatory code upgrades as they are required by local ordinance and covered under my policy.

Sincerely,
${data.claimantName}`;
            }

            displayResults(content) {
                const resultContainer = document.getElementById('resultContainer');
                const resultContent = document.getElementById('resultContent');
                
                resultContent.textContent = content;
                resultContainer.classList.add('show');
                
                // Scroll to results
                resultContainer.scrollIntoView({ behavior: 'smooth' });
            }

            setupDownloadButtons() {
                const copyBtn = document.getElementById('copyTextBtn');
                const downloadPdfBtn = document.getElementById('downloadPdfBtn');
                
                copyBtn.addEventListener('click', () => {
                    navigator.clipboard.writeText(this.generatedContent).then(() => {
                        copyBtn.textContent = '‚úì Copied!';
                        setTimeout(() => {
                            copyBtn.textContent = 'üìã Copy Text';
                        }, 2000);
                    });
                });
                
                downloadPdfBtn.addEventListener('click', () => {
                    // This would generate and download a PDF
                    alert('PDF download functionality would be implemented here.');
                });
            }

            showError(message) {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-message';
                errorDiv.textContent = message;
                
                const container = document.querySelector('.document-generator');
                container.insertBefore(errorDiv, container.firstChild);
                
                setTimeout(() => {
                    errorDiv.remove();
                }, 5000);
            }
        }

        // Initialize the document generator when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new DocumentGenerator();
        });
    </script>
</body>
</html>