<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>State-Specific Rights & Deadlines - Claim Navigator</title>
  <meta name="description" content="Get state-specific insurance claim rights, deadlines, and regulatory protections for your insurance claim.">
  <style>
    :root {
      --primary: #1e40af;
      --accent: #3b82f6;
      --border: #e5e7eb;
      --text-secondary: #6b7280;
      --bg-light: #f9fafb;
      --success: #10b981;
      --error: #ef4444;
    }
    body { font-family: Arial, sans-serif; margin:0; padding:0; background: linear-gradient(rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.85)), url('../../assets/images/backgrounds/paperwork6.jpeg') no-repeat center center fixed; background-size: cover; color: #ffffff !important; }
    :root{--navy:#0f172a;--primary:#1e40af;--primary-600:#1e3a8a;--accent:#3b82f6;--text:#111827;--muted:#6b7280;--border:#e5e7eb;--panel:#f8fafc;--success:#10b981;--warn:#f59e0b;--error:#ef4444;}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;color:#ffffff !important;background: linear-gradient(rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.85)), url('../../assets/images/backgrounds/paperwork6.jpeg') no-repeat center center fixed; background-size: cover; line-height:1.6}
    
    /* Ensure all text is readable on dark background */
    body, body * {
        color: #ffffff !important;
    }
    
    body a {
        color: #dbeafe !important;
    }
    
    body a:hover {
        color: #93c5fd !important;
    }
    
    .header{position:sticky;top:0;z-index:1000;background:var(--navy);color:#fff;box-shadow:0 2px 6px rgba(0,0,0,.08)}
    .header .container{max-width:1200px;margin:0 auto;padding:14px 24px;display:flex;align-items:center;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800}
    .nav a{color:#c9d4ff;text-decoration:none;padding:.5rem .75rem;border-radius:.5rem}
    .nav a:hover{background:rgba(255,255,255,.1)}
    .main-content { padding:2rem; max-width: 1200px; margin: 0 auto; }
    .main-content h1 { text-align: center; }
    .main-content > p { text-align: center; }
    .btn-primary { background:var(--primary); color:#fff; border:none; border-radius:0.5rem; padding:0.5rem 1rem; cursor:pointer; text-decoration:none; display:inline-block; }
    .btn-secondary { background:var(--accent); color:#fff; border:none; border-radius:0.5rem; padding:0.5rem 1rem; cursor:pointer; text-decoration:none; display:inline-block; }
    .form-container { background:rgba(255, 255, 255, 0.1) !important; padding:2rem; border-radius:1rem; margin: 0 auto 2rem auto; max-width: 600px; border:1px solid rgba(255, 255, 255, 0.2) !important; backdrop-filter:blur(8px) !important; -webkit-backdrop-filter:blur(8px) !important; color:#ffffff !important; transition:all 0.25s ease; }
    .form-container:hover { background:rgba(255, 255, 255, 0.15) !important; border-color:rgba(255, 255, 255, 0.3) !important; }
    .form-group { margin-bottom:1rem; }
    .form-group label { display:block; margin-bottom:0.5rem; font-weight:bold; color: #ffffff !important; }
    .form-group select, .form-group input { width:100%; padding:0.75rem; border:1px solid rgba(255, 255, 255, 0.2) !important; background:rgba(255, 255, 255, 0.1) !important; color:#ffffff !important; border-radius:1rem; transition:all 0.25s ease; }
    .form-group select:focus, .form-group input:focus { outline:none; border-color:rgba(255, 255, 255, 0.4) !important; background:rgba(255, 255, 255, 0.15) !important; }
    .form-group select option { background:rgba(20, 24, 28, 0.95); color:#ffffff; padding:0.5rem; }
    .form-group input::placeholder { color:rgba(255, 255, 255, 0.6) !important; }
    .form-group input[type="radio"] { width:auto; accent-color:var(--primary); margin-right:0.5rem; }
    .form-group label span { color:#ffffff !important; }
    .form-group > div label { color:#ffffff !important; font-weight:normal; }
    .form-group > div label span { color:#ffffff !important; }
    .lang-toggle { background:rgba(255, 255, 255, 0.1); padding:0.5rem 1rem; border-radius:1rem; border:1px solid rgba(255,255,255,0.2); backdrop-filter:blur(8px); -webkit-backdrop-filter:blur(8px); cursor:pointer; color:#ffffff; }
    .output-panel { background:rgba(255, 255, 255, 0.1) !important; border:1px solid rgba(255, 255, 255, 0.2) !important; backdrop-filter:blur(8px) !important; -webkit-backdrop-filter:blur(8px) !important; border-radius:1rem !important; padding:1rem; min-height:200px; white-space:pre-wrap; display:none; color:#ffffff !important; max-width: 600px; margin: 0 auto; }
    .loading { text-align:center; padding:2rem; color:#ffffff; max-width: 600px; margin: 0 auto; }
    .error { color:#ffffff; background:rgba(239, 68, 68, 0.2); border:1px solid rgba(239, 68, 68, 0.4); backdrop-filter:blur(8px); -webkit-backdrop-filter:blur(8px); padding:1rem; border-radius:1rem; margin:1rem auto; max-width: 600px; }
    .success { color:#ffffff; background:rgba(16, 185, 129, 0.2); border:1px solid rgba(16, 185, 129, 0.4); backdrop-filter:blur(8px); -webkit-backdrop-filter:blur(8px); padding:1rem; border-radius:1rem; margin:1rem 0; }
    .disclaimer { font-size:0.875rem; color:#ffffff !important; margin: 2rem auto 0 auto; padding:1.5rem; background:rgba(255, 255, 255, 0.1) !important; border:1px solid rgba(255, 255, 255, 0.2) !important; backdrop-filter:blur(8px) !important; -webkit-backdrop-filter:blur(8px) !important; border-radius:1rem; transition:all 0.25s ease; max-width: 600px; }
    .disclaimer strong { color:#ffffff !important; }
    .disclaimer span { color:rgba(255, 255, 255, 0.9) !important; }
    .back-link { margin-bottom:1rem; }
    .back-link a { color:var(--primary); text-decoration:none; }
    .back-link a:hover { text-decoration:underline; }
    .two-column { display:grid; grid-template-columns:1fr 1fr; gap:2rem; }
    @media (max-width: 768px) {
      .two-column { grid-template-columns:1fr; }
      .main-content { padding:1rem; }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="container">
      <div class="brand">Claim Navigation AI</div>
      <nav class="nav">
        <a href="/app/index.html">Home</a>
        <span >></span>
        <span >State Rights & Deadlines</span>
        <span >></span>
        <a href="/app/resource-center.html">Resource Center</a>
      </nav>
    </div>
  </header>

  <div class="main-content">
    <div class="back-link">
      <a href="response-center.html" data-en="← Back to Response Center" data-es="← Volver al Centro de Respuesta">← Back to Response Center</a>
    </div>

    <h1 data-en="State-Specific Rights & Deadlines" data-es="Derechos y Plazos Específicos del Estado" style="color: #ffffff !important;">State-Specific Rights & Deadlines</h1>
    <p data-en="Get state-specific insurance claim rights, deadlines, and regulatory protections for your insurance claim." 
       data-es="Obtenga derechos de reclamos de seguros específicos del estado, plazos y protecciones regulatorias para su reclamo de seguro."
       style="color: rgba(255, 255, 255, 0.9) !important;">
       Get state-specific insurance claim rights, deadlines, and regulatory protections for your insurance claim.
    </p>

    <div class="form-container">
      <h2 data-en="Select Your State and Claim Type" data-es="Seleccione Su Estado y Tipo de Reclamo" style="color: #ffffff !important;">Select Your State and Claim Type</h2>
      
      <form id="state-rights-form">
        <div class="form-group">
          <label for="state" data-en="U.S. State" data-es="Estado de EE.UU.">U.S. State <span >*</span></label>
          <select id="state" name="state" required>
            <option value="" data-en="Select a state..." data-es="Seleccione un estado...">Select a state...</option>
            <option value="Alabama">Alabama</option>
            <option value="Alaska">Alaska</option>
            <option value="Arizona">Arizona</option>
            <option value="Arkansas">Arkansas</option>
            <option value="California">California</option>
            <option value="Colorado">Colorado</option>
            <option value="Connecticut">Connecticut</option>
            <option value="Delaware">Delaware</option>
            <option value="Florida">Florida</option>
            <option value="Georgia">Georgia</option>
            <option value="Hawaii">Hawaii</option>
            <option value="Idaho">Idaho</option>
            <option value="Illinois">Illinois</option>
            <option value="Indiana">Indiana</option>
            <option value="Iowa">Iowa</option>
            <option value="Kansas">Kansas</option>
            <option value="Kentucky">Kentucky</option>
            <option value="Louisiana">Louisiana</option>
            <option value="Maine">Maine</option>
            <option value="Maryland">Maryland</option>
            <option value="Massachusetts">Massachusetts</option>
            <option value="Michigan">Michigan</option>
            <option value="Minnesota">Minnesota</option>
            <option value="Mississippi">Mississippi</option>
            <option value="Missouri">Missouri</option>
            <option value="Montana">Montana</option>
            <option value="Nebraska">Nebraska</option>
            <option value="Nevada">Nevada</option>
            <option value="New Hampshire">New Hampshire</option>
            <option value="New Jersey">New Jersey</option>
            <option value="New Mexico">New Mexico</option>
            <option value="New York">New York</option>
            <option value="North Carolina">North Carolina</option>
            <option value="North Dakota">North Dakota</option>
            <option value="Ohio">Ohio</option>
            <option value="Oklahoma">Oklahoma</option>
            <option value="Oregon">Oregon</option>
            <option value="Pennsylvania">Pennsylvania</option>
            <option value="Rhode Island">Rhode Island</option>
            <option value="South Carolina">South Carolina</option>
            <option value="South Dakota">South Dakota</option>
            <option value="Tennessee">Tennessee</option>
            <option value="Texas">Texas</option>
            <option value="Utah">Utah</option>
            <option value="Vermont">Vermont</option>
            <option value="Virginia">Virginia</option>
            <option value="Washington">Washington</option>
            <option value="West Virginia">West Virginia</option>
            <option value="Wisconsin">Wisconsin</option>
            <option value="Wyoming">Wyoming</option>
          </select>
        </div>

        <div class="form-group">
          <label for="claimType" data-en="Claim Type" data-es="Tipo de Reclamo">Claim Type <span >*</span></label>
          <select id="claimType" name="claimType" required>
            <option value="" data-en="Select claim type..." data-es="Seleccione tipo de reclamo...">Select claim type...</option>
            <option value="Property" data-en="Property" data-es="Propiedad">Property</option>
            <option value="Business Interruption" data-en="Business Interruption" data-es="Interrupción de Negocio">Business Interruption</option>
            <option value="Other" data-en="Other" data-es="Otro">Other</option>
          </select>
        </div>

        <div class="form-group">
          <label data-en="Language" data-es="Idioma">Language</label>
          <div style="display:flex; gap:1rem; align-items:center;">
            <label style="display:flex; align-items:center; gap:0.5rem;">
              <input type="radio" name="language" value="en" checked>
              <span data-en="English" data-es="Inglés">English</span>
            </label>
            <label style="display:flex; align-items:center; gap:0.5rem;">
              <input type="radio" name="language" value="es">
              <span data-en="Spanish" data-es="Español">Spanish</span>
            </label>
          </div>
        </div>

        <button type="submit" class="btn-primary" style="width:100%;" data-en="Get State Rights & Deadlines" data-es="Obtener Derechos y Plazos del Estado">Get State Rights & Deadlines</button>
      </form>
    </div>

    <div>
      <div id="loading" class="loading" style="display:none;">
        <p data-en="Generating state-specific rights and deadlines..." data-es="Generando derechos y plazos específicos del estado...">Generating state-specific rights and deadlines...</p>
      </div>

      <div id="error" class="error" style="display:none;"></div>

      <div id="output" class="output-panel">
        <div id="output-content"></div>
      </div>
    </div>

    <div class="disclaimer">
      <strong data-en="Disclaimer:" data-es="Descargo de Responsabilidad:">Disclaimer:</strong>
      <span data-en="This information is AI-generated and may not reflect the latest law. Always consult with a qualified attorney for legal advice specific to your situation." 
            data-es="Esta información es generada por IA y puede no reflejar la ley más reciente. Siempre consulte con un abogado calificado para obtener asesoría legal específica a su situación.">
            This information is AI-generated and may not reflect the latest law. Always consult with a qualified attorney for legal advice specific to your situation.
      </span>
    </div>
  </div>

  <script>
    // Language toggle functionality
    let currentLang = 'en';
    
    function toggleLanguage() {
      currentLang = currentLang === 'en' ? 'es' : 'en';
      document.documentElement.lang = currentLang;
      
      // Update all elements with data-en and data-es attributes
      const elements = document.querySelectorAll('[data-en][data-es]');
      elements.forEach(element => {
        const text = element.getAttribute(`data-${currentLang}`);
        if (text) {
          if (element.tagName === 'INPUT' || element.tagName === 'BUTTON') {
            element.textContent = text;
          } else {
            element.innerHTML = text;
          }
        }
      });
      
      // Update page title
      document.title = currentLang === 'es' 
        ? 'Derechos y Plazos Específicos del Estado - Claim Navigator' 
        : 'State-Specific Rights & Deadlines - Claim Navigator';
      
      // Store preference
      localStorage.setItem('preferredLanguage', currentLang);
    }
    
    // Load preferred language on page load
    document.addEventListener('DOMContentLoaded', function() {
      const savedLang = localStorage.getItem('preferredLanguage');
      if (savedLang && savedLang === 'es') {
        toggleLanguage();
      }
    });

    // Form submission
    document.getElementById('state-rights-form').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const formData = new FormData(this);
      const state = formData.get('state');
      const claimType = formData.get('claimType');
      const language = formData.get('language');
      
      if (!state || !claimType) {
        showError(currentLang === 'es' 
          ? 'Por favor, seleccione un estado y tipo de reclamo.' 
          : 'Please select a state and claim type.');
        return;
      }
      
      // Show loading state
      showLoading();
      hideError();
      hideOutput();
      
      try {
        const response = await fetch('/.netlify/functions/getStateRights', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${localStorage.getItem('supabase.auth.token')}`
          },
          body: JSON.stringify({
            state: state,
            claimType: claimType,
            language: language
          })
        });
        
        const result = await response.json();
        
        if (response.ok) {
          // Map state names to abbreviations
          const stateAbbrMap = {
            'Alabama': 'AL', 'Alaska': 'AK', 'Arizona': 'AZ', 'Arkansas': 'AR', 'California': 'CA',
            'Colorado': 'CO', 'Connecticut': 'CT', 'Delaware': 'DE', 'Florida': 'FL', 'Georgia': 'GA',
            'Hawaii': 'HI', 'Idaho': 'ID', 'Illinois': 'IL', 'Indiana': 'IN', 'Iowa': 'IA',
            'Kansas': 'KS', 'Kentucky': 'KY', 'Louisiana': 'LA', 'Maine': 'ME', 'Maryland': 'MD',
            'Massachusetts': 'MA', 'Michigan': 'MI', 'Minnesota': 'MN', 'Mississippi': 'MS', 'Missouri': 'MO',
            'Montana': 'MT', 'Nebraska': 'NE', 'Nevada': 'NV', 'New Hampshire': 'NH', 'New Jersey': 'NJ',
            'New Mexico': 'NM', 'New York': 'NY', 'North Carolina': 'NC', 'North Dakota': 'ND', 'Ohio': 'OH',
            'Oklahoma': 'OK', 'Oregon': 'OR', 'Pennsylvania': 'PA', 'Rhode Island': 'RI', 'South Carolina': 'SC',
            'South Dakota': 'SD', 'Tennessee': 'TN', 'Texas': 'TX', 'Utah': 'UT', 'Vermont': 'VT',
            'Virginia': 'VA', 'Washington': 'WA', 'West Virginia': 'WV', 'Wisconsin': 'WI', 'Wyoming': 'WY'
          };
          const stateAbbr = stateAbbrMap[state] || state.substring(0, 2).toUpperCase();
          const stateLink = `/app/resource-center/state/${stateAbbr}.html`;
          
          // Add link to state-specific page
          const contentDiv = document.getElementById('output-content');
          const linkHtml = `<br/><br/><a href="${stateLink}" style="color: #1e40af; text-decoration: underline; font-weight: 600;">View Complete ${state} Guide →</a>`;
          contentDiv.innerHTML = result.response.replace(/\n/g, '<br/>') + linkHtml;
        } else {
          if (result.requiresUpgrade) {
            showError(currentLang === 'es' 
              ? 'Créditos insuficientes. Por favor, actualice su plan o compre créditos.' 
              : 'Insufficient credits. Please upgrade your plan or purchase credits.');
          } else {
            showError(result.error || (currentLang === 'es' 
              ? 'Error al generar la información. Inténtelo de nuevo.' 
              : 'Error generating information. Please try again.'));
          }
        }
      } catch (error) {
        console.error('Error:', error);
        showError(currentLang === 'es' 
          ? 'Error de conexión. Verifique su conexión a internet e inténtelo de nuevo.' 
          : 'Connection error. Please check your internet connection and try again.');
      } finally {
        hideLoading();
      }
    });
    
    function showLoading() {
      document.getElementById('loading').style.display = 'block';
    }
    
    function hideLoading() {
      document.getElementById('loading').style.display = 'none';
    }
    
    function showError(message) {
      const errorDiv = document.getElementById('error');
      errorDiv.textContent = message;
      errorDiv.style.display = 'block';
    }
    
    function hideError() {
      document.getElementById('error').style.display = 'none';
    }
    
    function showOutput(content) {
      const outputDiv = document.getElementById('output');
      const contentDiv = document.getElementById('output-content');
      contentDiv.textContent = content;
      outputDiv.style.display = 'block';
    }
    
    function hideOutput() {
      document.getElementById('output').style.display = 'none';
    }
  </script>
<script type="module" src="/app/assets/js/diagnostics.js"></script>
<script type="module" src="/app/assets/js/window-bridge.js"></script>
</body>
</html>
