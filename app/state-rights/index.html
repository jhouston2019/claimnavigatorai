<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>⚖️ State Rights & Deadlines</title><link rel="stylesheet" href="/app/assets/css/style.css"/></head><body>
<header class="header"><div class="bar container"><div class="brand"><div class="logo"></div><div>State Rights & Deadlines</div></div>
<nav class="nav"><a href="/app/response-center.html">← Resource Center</a></nav></div></header>
<main class="container" id="main">
  <div class="card">
    <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(240px,1fr))">
      <label>Your State <input id="state" placeholder="e.g., CA"/></label>
      <label>Loss Type <select id="loss"><option>Property</option><option>Auto</option><option>Health</option></select></label>
      <label>Insurer <input id="carrier" placeholder="Carrier (optional)"/></label>
    </div>
    <div style="margin-top:8px"><button class="btn btn-primary" id="load">Get Deadlines & Rights</button></div>
  </div>
  <div id="out" class="card" style="margin-top:12px"></div>
</main>
<script type="module">
  import {qs,on} from '/app/assets/js/ui-helpers.js';
  import db from '/app/assets/data/state-rights.json' assert { type:'json' };
  import { analyzePolicyText } from '/app/assets/js/api-client.js';
  on(qs('#load'),'click', async ()=>{
    const st=qs('#state').value.trim().toUpperCase(); const base = db[st];
    let html = base ? `<h3>${st}</h3><ul>${base.deadlines.map(d=>'<li>'+d+'</li>').join('')}</ul><div class="small">Statutes: ${base.statutes.join(', ')}</div>` : '<em>No baseline in local DB.</em>';
    qs('#out').innerHTML = html + '<div class="small" style="margin-top:8px">Fetching AI supplemental guidance…</div>';
    const ai = await analyzePolicyText(`State: ${st}\nLoss: ${qs('#loss').value}\nCarrier:${qs('#carrier').value}`, 'coverage_review');
    qs('#out').innerHTML = html + '<hr/>' + (ai.analysis||ai.response||'(no AI details)');
  });
</script>
<script type="module" src="/app/assets/js/diagnostics.js"></script></body></html>