<!doctype html><html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>üß≠ Situational Advisory</title>
<link rel="stylesheet" href="/app/assets/css/style.css"/></head><body>
<header class="header"><div class="bar container"><div class="brand"><div class="logo"></div><div>Situational Advisory</div></div>
<nav class="nav"><a href="/app/response-center.html">‚Üê Resource Center</a></nav></div></header>
<main class="container" id="main">
  <div class="card"><h2>Describe your situation</h2>
    <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(240px,1fr))">
      <label>State <input id="state" placeholder="e.g., TX"/></label>
      <label>Policy # <input id="policy" placeholder="12345"/></label>
      <label>Claim # <input id="claim" placeholder="ABC-0001"/></label>
      <label>Date of Loss <input id="dol" placeholder="YYYY-MM-DD"/></label>
    </div>
    <label style="display:block;margin-top:8px">What happened?<textarea id="details" placeholder="Denied? Low offer? Delay? Add specifics."></textarea></label>
    <div style="display:flex;gap:8px;margin-top:8px">
      <button class="btn btn-primary" id="advise">Get Next Steps</button>
    </div>
  </div>
  <div id="out" class="card" style="margin-top:12px"></div>
</main>
<script type="module">
  import {qs,on} from '/app/assets/js/ui-helpers.js';
  import { callAI } from '/app/assets/js/api-client.js';
  function linkToDoc(slug, params){
    const query = new URLSearchParams(params).toString();
    return `/app/documents/${slug}.html?${query}`;
  }
  on(qs('#advise'),'click', async ()=>{
    const payload = {
      inputText: `State: ${qs('#state').value}\nPolicy: ${qs('#policy').value}\nClaim: ${qs('#claim').value}\nDOL: ${qs('#dol').value}\n\nSituation:\n${qs('#details').value}`,
      type:'advisory'
    };
    qs('#out').innerHTML='Thinking‚Ä¶';
    const rec = await callAI(payload,{type:'advisory'});
    const fields = {policy:qs('#policy').value,claim:qs('#claim').value};
    const shortcuts = [
      ['Appeal Letter','appeal-letter'],
      ['Demand Letter','demand-letter'],
      ['Coverage Clarification','coverage-clarification'],
      ['Notice of Delay','delay-complaint'],
      ['Proof of Loss','proof-of-loss']
    ].map(([title,slug])=>`<a class="btn" href="${linkToDoc(slug, fields)}">Create ${title}</a>`).join(' ');
    qs('#out').innerHTML = (rec.response||rec.analysis||'(no content)') + `<hr/><div style="display:flex;gap:8px;flex-wrap:wrap">${shortcuts}</div>`;
  });
</script>
<script type="module" src="/app/assets/js/diagnostics.js"></script>
</body></html>