<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Claim Resource & AI Response Center - ClaimNavigatorAI</title>
  <meta name="description" content="AI-powered claim resource and response center with hybrid navigation, document library, AI response generation, claim analysis tools, and playbook.">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <style>
    :root {
      --primary: #1e40af;
      --accent: #3b82f6;
      --border: #e5e7eb;
      --text-secondary: #6b7280;
      --bg-light: #f9fafb;
    }
    
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
      margin: 0; 
      padding: 0; 
      background: #f8fafc; 
    }
    
    /* Override Tailwind for custom components */
    .response-center-container {
      height: 100vh;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <!-- Main Response Center Container -->
  <div id="response-center-container" class="response-center-container">
    <!-- Response Center will be initialized here -->
  </div>

  <!-- Load Component Scripts -->
  <script src="../../components/ResponseCenter/SidebarNav.js"></script>
  <script src="../../components/ResponseCenter/DashboardLanding.js"></script>
  <script src="../../components/ResponseCenter/ResponseCenter.js"></script>

  <!-- Initialize Response Center -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize the hybrid Response Center
      const container = document.getElementById('response-center-container');
      const responseCenter = new ResponseCenter(container, {
        initialSection: 'dashboard',
        isMobile: window.innerWidth <= 768
      });

      // Handle URL parameters for deep linking
      const urlParams = new URLSearchParams(window.location.search);
      const section = urlParams.get('section') || 'dashboard';
      const subsection = urlParams.get('subsection');
      
      if (section !== 'dashboard') {
        responseCenter.navigateToSection(section, subsection);
      }

      // Handle browser back/forward
      window.addEventListener('popstate', function(event) {
        if (event.state) {
          responseCenter.navigateToSection(event.state.section, event.state.subsection);
        }
      });

      // Update URL when navigating
      const originalNavigate = responseCenter.navigateToSection;
      responseCenter.navigateToSection = function(section, subsection) {
        originalNavigate.call(this, section, subsection);
        
        // Update URL without page reload
        const url = new URL(window.location);
        url.searchParams.set('section', section);
        if (subsection) {
          url.searchParams.set('subsection', subsection);
        } else {
          url.searchParams.delete('subsection');
        }
        
        history.pushState({ section, subsection }, '', url);
      };

      // Global error handling
      window.addEventListener('error', function(event) {
        console.error('Response Center Error:', event.error);
        
        // Show user-friendly error message
        const contentArea = document.querySelector('.response-center-content');
        if (contentArea) {
          contentArea.innerHTML = `
            <div class="error-content">
              <div class="error-icon">‚ö†Ô∏è</div>
              <h3>Something went wrong</h3>
              <p>We're working to fix this issue. Please try refreshing the page.</p>
              <button class="btn-primary" onclick="location.reload()">Refresh Page</button>
            </div>
          `;
        }
      });

      // Development mode indicators
      if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
        console.log('üöÄ Response Center Hybrid Navigation Initialized');
        console.log('üì± Mobile Mode:', responseCenter.options.isMobile);
        console.log('üéØ Current Section:', responseCenter.getCurrentSection());
      }
    });
  </script>

  <!-- Additional Integration Scripts -->
  <script>
    // Integration with existing functionality
    window.ClaimNavigatorResponseCenter = {
      // Expose methods for external integration
      navigateToSection: function(section, subsection) {
        const container = document.getElementById('response-center-container');
        const responseCenter = container.responseCenter;
        if (responseCenter) {
          responseCenter.navigateToSection(section, subsection);
        }
      },
      
      getCurrentSection: function() {
        const container = document.getElementById('response-center-container');
        const responseCenter = container.responseCenter;
        return responseCenter ? responseCenter.getCurrentSection() : null;
      },
      
      // Integration with existing tabs
      switchToTab: function(tabName) {
        const tabMapping = {
          'ai-generator': 'situational-advisory',
          'my-documents': 'document-library',
          'claim-playbook': 'claim-timeline',
          'appeal-builder': 'maximize-claim',
          'settings': 'how-to-use'
        };
        
        const section = tabMapping[tabName] || 'dashboard';
        this.navigateToSection(section);
      }
    };

    // Store reference for external access
    document.addEventListener('DOMContentLoaded', function() {
      const container = document.getElementById('response-center-container');
      container.responseCenter = window.ClaimNavigatorResponseCenter;
    });
  </script>

  <!-- Performance Monitoring -->
  <script>
    // Monitor performance
    if (window.performance && window.performance.mark) {
      window.performance.mark('response-center-start');
      
      window.addEventListener('load', function() {
        window.performance.mark('response-center-end');
        window.performance.measure('response-center-load', 'response-center-start', 'response-center-end');
        
        const measure = window.performance.getEntriesByName('response-center-load')[0];
        if (measure && measure.duration > 1000) {
          console.warn('‚ö†Ô∏è Response Center took longer than expected to load:', measure.duration + 'ms');
        }
      });
    }
  </script>
</body>
</html>
