<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>State-Specific Rights & Deadlines - ClaimNavigatorAI</title>
  <meta name="description" content="Get state-specific insurance claim rights, deadlines, and regulatory protections for your insurance claim.">
  <style>
    :root {
      --primary: #1e40af;
      --accent: #3b82f6;
      --border: #e5e7eb;
      --text-secondary: #6b7280;
      --bg-light: #f9fafb;
      --success: #10b981;
      --error: #ef4444;
    }
    body { font-family: Arial, sans-serif; margin:0; padding:0; background:#fff; }
    :root{--navy:#0f172a;--primary:#1e40af;--primary-600:#1e3a8a;--accent:#3b82f6;--text:#111827;--muted:#6b7280;--border:#e5e7eb;--panel:#f8fafc;--success:#10b981;--warn:#f59e0b;--error:#ef4444;}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:#fff;line-height:1.6}
    .header{position:sticky;top:0;z-index:1000;background:var(--navy);color:#fff;box-shadow:0 2px 6px rgba(0,0,0,.08)}
    .header .container{max-width:1200px;margin:0 auto;padding:14px 24px;display:flex;align-items:center;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800}
    .nav a{color:#c9d4ff;text-decoration:none;padding:.5rem .75rem;border-radius:.5rem}
    .nav a:hover{background:rgba(255,255,255,.1)}
    .main-content { padding:2rem; max-width: 1200px; margin: 0 auto; }
    .btn-primary { background:var(--primary); color:#fff; border:none; border-radius:0.5rem; padding:0.5rem 1rem; cursor:pointer; text-decoration:none; display:inline-block; }
    .btn-secondary { background:var(--accent); color:#fff; border:none; border-radius:0.5rem; padding:0.5rem 1rem; cursor:pointer; text-decoration:none; display:inline-block; }
    .form-container { background:var(--bg-light); padding:2rem; border-radius:0.5rem; margin-bottom:2rem; }
    .form-group { margin-bottom:1rem; }
    .form-group label { display:block; margin-bottom:0.5rem; font-weight:bold; }
    .form-group select, .form-group input { width:100%; padding:0.5rem; border:1px solid var(--border); border-radius:0.25rem; }
    .lang-toggle { background:#87ceeb; padding:0.5rem 1rem; border-radius:0.25rem; border:1px solid rgba(255,255,255,0.3); cursor:pointer; }
    .output-panel { background:#fff; border:1px solid var(--border); border-radius:0.5rem; padding:1rem; min-height:200px; white-space:pre-wrap; display:none; }
    .loading { text-align:center; padding:2rem; }
    .error { color:var(--error); background:#fee2e2; padding:1rem; border-radius:0.5rem; margin:1rem 0; }
    .success { color:var(--success); background:#d1fae5; padding:1rem; border-radius:0.5rem; margin:1rem 0; }
    .disclaimer { font-size:0.875rem; color:var(--text-secondary); margin-top:1rem; padding:1rem; background:#f3f4f6; border-radius:0.5rem; }
    .back-link { margin-bottom:1rem; }
    .back-link a { color:var(--primary); text-decoration:none; }
    .back-link a:hover { text-decoration:underline; }
    .two-column { display:grid; grid-template-columns:1fr 1fr; gap:2rem; }
    @media (max-width: 768px) {
      .two-column { grid-template-columns:1fr; }
      .main-content { padding:1rem; }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="container">
      <div class="brand">ClaimNavigatorAI</div>
      <nav class="nav">
        <a href="/app/index.html">Home</a>
        <span style="color: #64748b; margin: 0 0.25rem;">></span>
        <span style="color: white; font-weight: 600;">State Rights & Deadlines</span>
        <span style="color: #64748b; margin: 0 0.25rem;">></span>
        <a href="/app/resource-center.html">Resource Center</a>
      </nav>
    </div>
  </header>

  <div class="main-content">
    <div class="back-link">
      <a href="response-center.html" data-en="← Back to Response Center" data-es="← Volver al Centro de Respuesta">← Back to Response Center</a>
    </div>

    <h1 data-en="State-Specific Rights & Deadlines" data-es="Derechos y Plazos Específicos del Estado">State-Specific Rights & Deadlines</h1>
    <p data-en="Get state-specific insurance claim rights, deadlines, and regulatory protections for your insurance claim." 
       data-es="Obtenga derechos de reclamos de seguros específicos del estado, plazos y protecciones regulatorias para su reclamo de seguro.">
       Get state-specific insurance claim rights, deadlines, and regulatory protections for your insurance claim.
    </p>

    <div class="two-column">
      <div class="form-container">
        <h2 data-en="Select Your State and Claim Type" data-es="Seleccione Su Estado y Tipo de Reclamo">Select Your State and Claim Type</h2>
        
        <form id="state-rights-form">
          <div class="form-group">
            <label for="state" data-en="U.S. State" data-es="Estado de EE.UU.">U.S. State <span style="color:var(--error)">*</span></label>
            <select id="state" name="state" required>
              <option value="" data-en="Select a state..." data-es="Seleccione un estado...">Select a state...</option>
              <option value="Alabama">Alabama</option>
              <option value="Alaska">Alaska</option>
              <option value="Arizona">Arizona</option>
              <option value="Arkansas">Arkansas</option>
              <option value="California">California</option>
              <option value="Colorado">Colorado</option>
              <option value="Connecticut">Connecticut</option>
              <option value="Delaware">Delaware</option>
              <option value="Florida">Florida</option>
              <option value="Georgia">Georgia</option>
              <option value="Hawaii">Hawaii</option>
              <option value="Idaho">Idaho</option>
              <option value="Illinois">Illinois</option>
              <option value="Indiana">Indiana</option>
              <option value="Iowa">Iowa</option>
              <option value="Kansas">Kansas</option>
              <option value="Kentucky">Kentucky</option>
              <option value="Louisiana">Louisiana</option>
              <option value="Maine">Maine</option>
              <option value="Maryland">Maryland</option>
              <option value="Massachusetts">Massachusetts</option>
              <option value="Michigan">Michigan</option>
              <option value="Minnesota">Minnesota</option>
              <option value="Mississippi">Mississippi</option>
              <option value="Missouri">Missouri</option>
              <option value="Montana">Montana</option>
              <option value="Nebraska">Nebraska</option>
              <option value="Nevada">Nevada</option>
              <option value="New Hampshire">New Hampshire</option>
              <option value="New Jersey">New Jersey</option>
              <option value="New Mexico">New Mexico</option>
              <option value="New York">New York</option>
              <option value="North Carolina">North Carolina</option>
              <option value="North Dakota">North Dakota</option>
              <option value="Ohio">Ohio</option>
              <option value="Oklahoma">Oklahoma</option>
              <option value="Oregon">Oregon</option>
              <option value="Pennsylvania">Pennsylvania</option>
              <option value="Rhode Island">Rhode Island</option>
              <option value="South Carolina">South Carolina</option>
              <option value="South Dakota">South Dakota</option>
              <option value="Tennessee">Tennessee</option>
              <option value="Texas">Texas</option>
              <option value="Utah">Utah</option>
              <option value="Vermont">Vermont</option>
              <option value="Virginia">Virginia</option>
              <option value="Washington">Washington</option>
              <option value="West Virginia">West Virginia</option>
              <option value="Wisconsin">Wisconsin</option>
              <option value="Wyoming">Wyoming</option>
            </select>
          </div>

          <div class="form-group">
            <label for="claimType" data-en="Claim Type" data-es="Tipo de Reclamo">Claim Type <span style="color:var(--error)">*</span></label>
            <select id="claimType" name="claimType" required>
              <option value="" data-en="Select claim type..." data-es="Seleccione tipo de reclamo...">Select claim type...</option>
              <option value="Property" data-en="Property" data-es="Propiedad">Property</option>
              <option value="Auto" data-en="Auto" data-es="Auto">Auto</option>
              <option value="Health" data-en="Health" data-es="Salud">Health</option>
              <option value="Business Interruption" data-en="Business Interruption" data-es="Interrupción de Negocio">Business Interruption</option>
              <option value="Other" data-en="Other" data-es="Otro">Other</option>
            </select>
          </div>

          <div class="form-group">
            <label data-en="Language" data-es="Idioma">Language</label>
            <div style="display:flex; gap:1rem; align-items:center;">
              <label style="display:flex; align-items:center; gap:0.5rem;">
                <input type="radio" name="language" value="en" checked>
                <span data-en="English" data-es="Inglés">English</span>
              </label>
              <label style="display:flex; align-items:center; gap:0.5rem;">
                <input type="radio" name="language" value="es">
                <span data-en="Spanish" data-es="Español">Spanish</span>
              </label>
            </div>
          </div>

          <button type="submit" class="btn-primary" style="width:100%;" data-en="Get State Rights & Deadlines" data-es="Obtener Derechos y Plazos del Estado">Get State Rights & Deadlines</button>
        </form>
      </div>

      <div>
        <div id="loading" class="loading" style="display:none;">
          <p data-en="Generating state-specific rights and deadlines..." data-es="Generando derechos y plazos específicos del estado...">Generating state-specific rights and deadlines...</p>
        </div>

        <div id="error" class="error" style="display:none;"></div>

        <div id="output" class="output-panel">
          <div id="output-content"></div>
        </div>

        <div class="disclaimer">
          <strong data-en="Disclaimer:" data-es="Descargo de Responsabilidad:">Disclaimer:</strong>
          <span data-en="This information is AI-generated and may not reflect the latest law. Always consult with a qualified attorney for legal advice specific to your situation." 
                data-es="Esta información es generada por IA y puede no reflejar la ley más reciente. Siempre consulte con un abogado calificado para obtener asesoría legal específica a su situación.">
                This information is AI-generated and may not reflect the latest law. Always consult with a qualified attorney for legal advice specific to your situation.
          </span>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Language toggle functionality
    let currentLang = 'en';
    
    function toggleLanguage() {
      currentLang = currentLang === 'en' ? 'es' : 'en';
      document.documentElement.lang = currentLang;
      
      // Update all elements with data-en and data-es attributes
      const elements = document.querySelectorAll('[data-en][data-es]');
      elements.forEach(element => {
        const text = element.getAttribute(`data-${currentLang}`);
        if (text) {
          if (element.tagName === 'INPUT' || element.tagName === 'BUTTON') {
            element.textContent = text;
          } else {
            element.innerHTML = text;
          }
        }
      });
      
      // Update page title
      document.title = currentLang === 'es' 
        ? 'Derechos y Plazos Específicos del Estado - ClaimNavigatorAI' 
        : 'State-Specific Rights & Deadlines - ClaimNavigatorAI';
      
      // Store preference
      localStorage.setItem('preferredLanguage', currentLang);
    }
    
    // Load preferred language on page load
    document.addEventListener('DOMContentLoaded', function() {
      const savedLang = localStorage.getItem('preferredLanguage');
      if (savedLang && savedLang === 'es') {
        toggleLanguage();
      }
    });

    // Form submission
    document.getElementById('state-rights-form').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const formData = new FormData(this);
      const state = formData.get('state');
      const claimType = formData.get('claimType');
      const language = formData.get('language');
      
      if (!state || !claimType) {
        showError(currentLang === 'es' 
          ? 'Por favor, seleccione un estado y tipo de reclamo.' 
          : 'Please select a state and claim type.');
        return;
      }
      
      // Show loading state
      showLoading();
      hideError();
      hideOutput();
      
      try {
        const response = await fetch('/.netlify/functions/getStateRights', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${localStorage.getItem('supabase.auth.token')}`
          },
          body: JSON.stringify({
            state: state,
            claimType: claimType,
            language: language
          })
        });
        
        const result = await response.json();
        
        if (response.ok) {
          showOutput(result.response);
        } else {
          if (result.requiresUpgrade) {
            showError(currentLang === 'es' 
              ? 'Créditos insuficientes. Por favor, actualice su plan o compre créditos.' 
              : 'Insufficient credits. Please upgrade your plan or purchase credits.');
          } else {
            showError(result.error || (currentLang === 'es' 
              ? 'Error al generar la información. Inténtelo de nuevo.' 
              : 'Error generating information. Please try again.'));
          }
        }
      } catch (error) {
        console.error('Error:', error);
        showError(currentLang === 'es' 
          ? 'Error de conexión. Verifique su conexión a internet e inténtelo de nuevo.' 
          : 'Connection error. Please check your internet connection and try again.');
      } finally {
        hideLoading();
      }
    });
    
    function showLoading() {
      document.getElementById('loading').style.display = 'block';
    }
    
    function hideLoading() {
      document.getElementById('loading').style.display = 'none';
    }
    
    function showError(message) {
      const errorDiv = document.getElementById('error');
      errorDiv.textContent = message;
      errorDiv.style.display = 'block';
    }
    
    function hideError() {
      document.getElementById('error').style.display = 'none';
    }
    
    function showOutput(content) {
      const outputDiv = document.getElementById('output');
      const contentDiv = document.getElementById('output-content');
      contentDiv.textContent = content;
      outputDiv.style.display = 'block';
    }
    
    function hideOutput() {
      document.getElementById('output').style.display = 'none';
    }
  </script>
<script type="module" src="/app/assets/js/diagnostics.js"></script>
<script type="module" src="/app/assets/js/window-bridge.js"></script>
</body>
</html>